<!DOCTYPE html>
<html>
    <head>
        <title>UC TorchAI *Subject to Change*</title>
        <link rel="stylesheet" href="{{ url_for('static', filename='style.css' )}}">
    </head>
    <body>
        <h1>UC TorchAI *Subject to Change*</h1>
        <div class="container" id="container">
            <div class="plan-container" id="plan-container">
                <h2 id="plans">Saved Plans</h2>
            </div>
            <div class="chat-container" id="chat-container">
                <h2 id="virtual-advisor">Virtual Advisor</h2>
                <div class="message-container" id="message-container"></div>
                <div class="input-container">
                    <input type="text" id="prompt" name="prompt" placeholder="Enter prompt...">
                    <button onclick="sendMessage()">Send</button>
                </div>
            </div>
        </div>
        <script>
            function sendMessage() {
                var prompt = document.getElementById('prompt').value;
                addMessage('user', prompt);

                var xhttp = new XMLHttpRequest();
                xhttp.open("POST", "/");
                xhttp.setRequestHeader("Content-Type", "application/json");
                const body = {prompt: prompt};
                xhttp.send(JSON.stringify(body));

                xhttp.onload = function() {
                    addMessage('bot', xhttp.responseText);
                }
            }

            function addMessage(sender, message) {
                console.log('sender :' + sender + ' message: ' + message);
                const chatContainer = document.getElementById('message-container');
                const messageElement = document.createElement('div');
                messageElement.classList.add('chat-message');
                messageElement.classList.add(sender + '-message');
                messageElement.innerText = message;
                chatContainer.appendChild(messageElement);
            }
        </script>
    </body>
</html>